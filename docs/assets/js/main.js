"use strict";const userSearch=document.querySelector(".js-inputSearch"),btnSearchUser=document.querySelector(".js-btnSearch"),btnResetUser=document.querySelector(".js-btnReset"),listFavourites=document.querySelector(".js-favourites"),listCocktails=document.querySelector(".js-cocktails"),btnDeleteFavourites=document.querySelector(".js-btnDelet");let listCocktailsData=[],listFavouritesCocktailsData=[];function loadPageFav(){const t=JSON.parse(localStorage.getItem("itemCocktails"));t&&(listFavouritesCocktailsData=t,renderFavourites(listFavouritesCocktailsData))}function handleClick(t){t.preventDefault();const e=userSearch.value.toLowerCase();console.log(e),fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(t=>t.json()).then(t=>{listCocktailsData=t.drinks,listCocktails.innerHTML="",renderCocktailsList(listCocktailsData)})}function renderCocktailsList(t){for(const e of t){if(!e.strDrinkThumb){return`<li class="js-elementLi" id=${e.idDrink}>${e.strDrink}</li>\n            <img src=  https://via.placeholder.com/210x295/ffffff/666666/?text=TV />`}listCocktails.innerHTML+=renderCocktailsStructure(e)}addEventToCocktails()}function renderCocktailsStructure(t){let e="";return e=void 0!==listFavouritesCocktailsData.find(e=>t.idDrink===e.idDrink)?`<li class="js-elementLi list-all select" id=${t.idDrink}><h3 class="name-cocktail">${t.strDrink}</h3>\n        <img class="image" src= ${t.strDrinkThumb} alt="${t.strDrink}" title="${t.strDrink}"/> </li>`:`<li class="js-elementLi list-all" id=${t.idDrink}><h3 class="name-cocktail">${t.strDrink}</h3>\n            <img class="image-cocktails" src= ${t.strDrinkThumb} alt="${t.strDrink}" title="${t.strDrink}"/> </li>`,e}function renderCocktailsStructureFav(t){return`<li class="list-fav js-elementLi" id=${t.idDrink}><i class="fa-solid fa-circle-xmark js-DeleteX x-delete" id=${t.idDrink}></i><h3 class="name-cocktail-fav" >${t.strDrink}</h3>\n    <img class="image-cocktails_fav" src= ${t.strDrinkThumb} alt="${t.strDrink}" title="${t.strDrink}"/> </li>`}function handleClickElementLi(t){const e=t.currentTarget.id,i=listCocktailsData.find(t=>t.idDrink===e),s=listFavouritesCocktailsData.findIndex(t=>t.idDrink===e);-1===s?(t.currentTarget.classList.add("select"),listFavouritesCocktailsData.push(i)):(t.currentTarget.classList.remove("select"),listFavouritesCocktailsData.splice(s,1)),renderFavourites(listFavouritesCocktailsData),localStorage.setItem("itemCocktails",JSON.stringify(listFavouritesCocktailsData))}function renderFavourites(t){listFavourites.innerHTML="";for(const e of t)listFavourites.innerHTML+=renderCocktailsStructureFav(e);addEventToXfavourite()}function handleClickXFavourite(t){const e=t.currentTarget.id;console.log(e);const i=listFavouritesCocktailsData.findIndex(t=>t.idDrink===e);console.log(i),-1!==i&&listFavouritesCocktailsData.splice(i,1),console.log(listFavouritesCocktailsData),renderFavourites(listFavouritesCocktailsData),localStorage.setItem("itemCocktails",JSON.stringify(listFavouritesCocktailsData)),console.log("Hola")}function handleClickDeleteFavourites(){listFavourites.innerHTML="",localStorage.removeItem("itemCocktails")}function handleClickResetAll(){listCocktails.innerHTML="",listFavourites.innerHTML="",location.reload(),localStorage.removeItem("itemCocktails")}function addEventToCocktails(){const t=document.querySelectorAll(".js-elementLi");for(const e of t)e.addEventListener("click",handleClickElementLi);renderFavourites(listFavouritesCocktailsData),localStorage.setItem("itemCocktails",JSON.stringify(listFavouritesCocktailsData))}function addEventToXfavourite(){const t=document.querySelectorAll(".js-DeleteX");for(const e of t)e.addEventListener("click",handleClickXFavourite)}fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita").then(t=>t.json()).then(t=>{listCocktailsData=t.drinks,renderCocktailsList(listCocktailsData)}),loadPageFav(),btnSearchUser.addEventListener("click",handleClick),btnDeleteFavourites.addEventListener("click",handleClickDeleteFavourites),btnResetUser.addEventListener("click",handleClickResetAll);