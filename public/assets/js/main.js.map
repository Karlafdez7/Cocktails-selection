{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst userSearch=document.querySelector(\".js-inputSearch\");\n\nconst btnSearchUser=document.querySelector(\".js-btnSearch\");\n\nconst btnResetUser=document.querySelector(\".js-btnReset\");\n\nconst listFavourites=document.querySelector(\".js-favourites\");\n\nconst listCocktails=document.querySelector(\".js-cocktails\")\n\nconst btnDeleteFavourites=document.querySelector('.js-btnDelet')\n\n\n\n//Lista vacía para rellenar con los datos de la API\nlet listCocktailsData = [];\n// let listSearchUserData = [];\nlet listFavouritesCocktailsData = [];\n\n//Traer datos-cócteles: que se abra una lista de cócteles al cargar el proyecto\n//data.drinks es para obetener los datos que necesito de cada cocktail\nfetch('https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita')\n    .then((response) => response.json())\n    .then (data => {\n        listCocktailsData = data.drinks;\n        renderCocktailsList (listCocktailsData)\n        \n    });\n\n//En la línea 106 se ha enviado a Local los datos de los cócteles guardado, ahora tenemos que cogerlos: para que se proyecte en la página.\n//La colocamos aquí para que se situe al lado de la otra acción que se ejecuta cuando se actualiza o se inicia la página\n//Creamos una función que recoja esta acción. Para que se ejecute la llamamos abajo de la función. También habríamos podido no hacer la función, pero por motivos de estética la he creado. \nfunction loadPageFav () {\n    const favouriteListLocal = JSON.parse(localStorage.getItem('itemCocktails'));\n    if (favouriteListLocal) {\n        listFavouritesCocktailsData=favouriteListLocal;\n        renderFavourites(listFavouritesCocktailsData);        \n    }\n}\nloadPageFav();\n\n    //Se crea una función donde hacemos el FETCH con el link de la api para que la usuaria meta el valor de busqueda (userSearch.value)\n    //Para que no se sobreescriba a la lista de margaritas que tenemos al cargar la página: llamamos donde se pinta la lista de cócteles (ul) y la vacíamos.\n    //Hemos creado un nuevo array para que contenga la lista de busqueda de la usuaria \"listSearchUser\"\n    //Llamamos la estructura \"renderCocktailsList\" y le ponemos el parámetro de nuestro array. \n\nfunction handleClick(event) {\n    event.preventDefault();\n    const selectionCocktails = userSearch.value.toLowerCase();\n    console.log(selectionCocktails);\n    fetch(`https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${selectionCocktails}`)\n    .then((response) => response.json())\n    .then ((data) => {\n        listCocktailsData= data.drinks;\n        listCocktails.innerHTML= '';   \n        renderCocktailsList (listCocktailsData)  \n    });   \n}\n\n// // To check if the coctail is already on the coctailFav array. If so, (!== undefined) it adds the class selected to the div. \n//   const alreadyFav = coctailFav.find (oneCoctailFav => \n// coctailData.id===oneCoctailFav.id\n// );\n//   if (alreadyFav !== undefined){\n//     divElement.setAttribute ('class', 'coctail__div js-coctail selected');\n//   }\n//   return liElement;\n// } \n\n//Se hace una función para poder ir obteniendo los diferentes cocktails de la API mediante un for...of\n//El objetivo es poder pintar los cocktails\n//Se recoge la función renderCocktailsStructure para meter los datos de los cocktails dentro de la estructura\n//Esta función (renderCocktailsList) se llevará al Fetch para que se rellene una vez la API se haya traído a nuestro proyecto. Debemos tener en cuenta que el FETCH tarda más (aunque imperceptible) en cargar que el resto de ejecuciones, por eso lo debemos llamar en FETCH. \nfunction renderCocktailsList (listCocktailsData) {\n    listCocktails.innerHTML='';    \n    for (const cocktails of listCocktailsData) {        \n        if (cocktails.strDrinkThumb) { \n        listCocktails.innerHTML += renderCocktailsStructure(cocktails);         \n        } else {\n            let html =  `<li class=\"js-elementLi\" id=${cocktails.idDrink}>${cocktails.strDrink}</li>\n            <img src=  https://via.placeholder.com/210x295/ffffff/666666/?text=TV />`;\n            return html;\n        }\n    } \n    addEventToCocktails(); //<-- Llamo para que se ejecute la función click de seleccionar aquí: es el momento donde quiero que se ejecute (cuando se está pintando).\n}\n\n//Crear estructura de LI que se pintará en el HTML \n//Usar referencia del objeto para cada dato que necesito. En este caso el nombre del cocktail (strDrink) y la imagen del cocktail (strDrinkThumb)\nfunction renderCocktailsStructure(cocktails) {\n    const selectGeneral=listFavouritesCocktailsData.find(cocktailsFav => cocktails.idDrink ===cocktailsFav.idDrink)\n    let html =\"\";\n      if (selectGeneral !== undefined){\n        html =  `<li class=\"js-elementLi list-all select\" id=${cocktails.idDrink}><h3 class=\"name-cocktail\">${cocktails.strDrink}</h3>\n        <img class=\"image\" src= ${cocktails.strDrinkThumb} alt=\"${cocktails.strDrink}\" title=\"${cocktails.strDrink}\"/> </li>`;\n        } else {\n            html =  `<li class=\"js-elementLi list-all\" id=${cocktails.idDrink}><h3 class=\"name-cocktail\">${cocktails.strDrink}</h3>\n            <img class=\"image-cocktails\" src= ${cocktails.strDrinkThumb} alt=\"${cocktails.strDrink}\" title=\"${cocktails.strDrink}\"/> </li>`;\n        }      \n  \n        \n  return html;\n}\n\n\n//Creamos una función para la estrucutra de favoritos ya que vamos a necesitar generar un icono X (para eliminar el cóctel) desde lista favoritos. \n//Además de copiar el línk de awsome icon, le colocamos una clase de js para poder traerla al js y activarle un evento click. Además debemos añadir la ID del cóctel ya que es la forma en que añadimos o quitamos de fav.\nfunction renderCocktailsStructureFav(cocktails) {\n  let html =  `<li class=\"list-fav js-elementLi\" id=${cocktails.idDrink}><i class=\"fa-solid fa-circle-xmark js-DeleteX x-delete\" id=${cocktails.idDrink}></i><h3 class=\"name-cocktail-fav\" >${cocktails.strDrink}</h3>\n    <img class=\"image-cocktails_fav\" src= ${cocktails.strDrinkThumb} alt=\"${cocktails.strDrink}\" title=\"${cocktails.strDrink}\"/> </li>`;\n  return html;\n}\n\n//class=\"< class=\"fa-solid fa-x js-DeleteX\"\n//Creao la función que va a contener las acciones que desencadena \"click\" a un cocktail (la llamo en el eventList de abajo)\n//En esta función: poner o quitar selección / Llevar a la ul de favoritos el cóctel seleccionado\n\nfunction handleClickElementLi(ev){    \n    const idSelected = ev.currentTarget.id \n    const slctCocktail=listCocktailsData.find(cocktails => cocktails.idDrink === idSelected);\n    const indexCocktailFav= listFavouritesCocktailsData.findIndex(cocktails => cocktails.idDrink === idSelected); //Buscar la posición del elemento \n    if (indexCocktailFav === -1 ) {\n        ev.currentTarget.classList.add('select');\n        listFavouritesCocktailsData.push(slctCocktail);\n    } else { //si esta en el listado de favoritos, eliminalo\n        ev.currentTarget.classList.remove('select');\n        listFavouritesCocktailsData.splice(indexCocktailFav, 1);\n  }\n    renderFavourites(listFavouritesCocktailsData);\n    localStorage.setItem('itemCocktails', JSON.stringify(listFavouritesCocktailsData)); //<--Guardamos la lista de favoritos en el Local mediante setItem. Lo colocamos aquí porque es el momento donde se crea la lista de favoritos. Con esto lo tenemos guardado, pero necesitamos después cogerlos (get)\n}\n\n//Para poder pintar la lista de favoritos que se realiza en la función anterior (handleClickElementLi) que luego llamamos para que se ejecute en el momento que se crea.\n//Se ha podido reautilizar la función renderCocktailsStructure ya que se creo como una estructura para poder trabajar varias veces\n//\n//Se ejecuta aquí el evento X (eliminar favorito) ya que es el momento que se pinta la lista de fasvoritos. \n function renderFavourites (cocktailsfav) {\n    listFavourites.innerHTML = '';\n    for (const cocktailfav of cocktailsfav) {\n    listFavourites.innerHTML += renderCocktailsStructureFav(cocktailfav);\n  }\n    addEventToXfavourite();\n }\n\n//Al click de la img X le debemos dar unas acciones a realizar: creamos esta función\n//El proceso es similar al que realizamos para crear la lista, con la diferencia que en esta función solo debemos coger las parte que sirven para quitar.\nfunction handleClickXFavourite (ev) {\n     const idSelected = ev.currentTarget.id;\n     console.log(idSelected);\n     const indexCocktailFav= listFavouritesCocktailsData.findIndex(cocktails => cocktails.idDrink === idSelected);\n    console.log (indexCocktailFav);\n        if (indexCocktailFav !==-1) {\n        listFavouritesCocktailsData.splice(indexCocktailFav, 1);\n     }\n    console.log(listFavouritesCocktailsData);\n    renderFavourites(listFavouritesCocktailsData);\n    renderCocktailsList (listCocktailsData)\n    localStorage.setItem('itemCocktails', JSON.stringify(listFavouritesCocktailsData)); \n    \n\n}\n\n//Al click debemos ofrecerle una función que indique que debe pasar: en este caso lo que se busca con el delet favourite es que los cócteles que estan en favorito se limpie. \n//Si lo que se busca es vaciar la lista de favoritos\nfunction handleClickDeleteFavourites () {\n    listCocktails.innerHTML= '';\n    listFavourites.innerHTML = '';\n    localStorage.removeItem('itemCocktails');\n    location.reload();\n\n}\n\n//Le damos un función al evento click que haga: limpiar la lista de cócteles /limpiar lista de favoritos/ quitar el Local que guardo los favoritos/\n//Al vaciar la lista no se vuelve a poner la lista predeterminada, solución: que se reactualice la página una vez limpiado todos los campos. \nfunction handleClickResetAll () {\n    listCocktails.innerHTML= '';\n    listFavourites.innerHTML = '';\n    location.reload();\n    localStorage.removeItem('itemCocktails');   \n}\n\n//Una vez he conseguido que la lista de la API se cargue con la los margaritas:\n//Creo mis eventos aquí abajo ⬇️ \n//Arriba iremos poniendo las funciones que se ejecutan cuando activamos el evento\n\n//Primer evento asociado a la busqueda que haga la usuaria de cocktails. \n\nbtnSearchUser.addEventListener('click',handleClick);\nuserSearch.addEventListener('keyup',handleClick)\n//Creamos la función que va a sacar todos los LI (mediante bucle) para poder generar en cada uno de ellos el evento click\n//Una vez ha sido creado lo tengo que llamar \nfunction addEventToCocktails() {\n    const elementLi=document.querySelectorAll(\".js-elementLi\")\n    for (const li of elementLi) {\n        li.addEventListener('click', handleClickElementLi);\n    }\n    renderFavourites(listFavouritesCocktailsData);\n    localStorage.setItem('itemCocktails', JSON.stringify(listFavouritesCocktailsData));\n}\n\n//Creamos un evento en la imagen X que hemos creado para que pueda eliminar cócteles.\n//Al poner la class a todo aquel cóctel que sea seleccionado y pase al otro lado, se va a hacer un SelectorAll\n//Luego debemos hacer un bucle para ir otorgandole a cada X de un cóctel el evento click\nfunction addEventToXfavourite (){\n    const xFavourites= document.querySelectorAll('.js-DeleteX');\n    for (const xFavourite of xFavourites) {\n        xFavourite.addEventListener('click', handleClickXFavourite);\n     \n    }\n} \n\n//Se trae el botón de reset favorito del html al JS para poder trabajar. Debemos añadirle el evento click\nbtnDeleteFavourites.addEventListener('click', handleClickDeleteFavourites)\n\n//Traemos el botón Reset a JS y le damos un evento click\nbtnResetUser.addEventListener('click', handleClickResetAll)\n\n\n\n\n\n\n\n"]}